// @flow


import * as React from 'react';

import { render, fireEvent } from '@testing-library/react';
import userEvent from '@testing-library/user-event';

import { InputTextType } from './Constants';
import TextInput, { _errorBorderColor } from './TextInput.component';


const props = {
  value: '',
  label: 'Username',
  required: true,
  placeholder: 'Type your username',
  onChange: jest.fn((event: SyntheticInputEvent<HTMLInputElement>) => { console.log(event); }),
  maxLength: 30,
  disabled: false,
};

describe('TextInput Component', () => {
  it('should return border-tp-red if value of input i empty or email format is incorrect ', () => {
    const email = 'a';
    const result = _errorBorderColor(true, email);

    expect(result).toBe('border-tp-red hover:border-tp-red');
  });

  it('should show Username Cannot be Empty if input value empty', () => {
    const { getByPlaceholderText, getByText } = render(<TextInput {...props} />);

    const inputElement = getByPlaceholderText(props.placeholder);

    fireEvent.blur(inputElement);

    expect(getByText('Username Cannot be Empty')).toBeDefined();
    expect(getByText('*')).toBeDefined();
  });

  it('should not show error Usernam Cannot be Empty if input value filled', () => {
    const { getByPlaceholderText, queryByText } = render(<TextInput {...props} value="raihan" />);

    const inputElement = getByPlaceholderText(props.placeholder);

    fireEvent.blur(inputElement);

    expect(queryByText('Username Cannot be Empty')).toBeNull();
  });

  it('should change input type to text if user clicked icon visible on the input password', async () => {
    const { getByTestId } = render(
      <TextInput {...props} value="raihan" type="password" />
    );
    const eyeIcon = getByTestId('icon-eye');

    userEvent.click(eyeIcon);
    const input = getByTestId('text-input');

    expect(input.type).toBe(InputTextType.TEXT);
  });
});
// @flow

export type Props = {
  label: string,
  placeholder: string,
  value: string,
  onChange: (event: SyntheticInputEvent<HTMLInputElement>) => void,
  required?: boolean,
  disabled?: boolean,
  maxLength?: number,
  icon?: string,
  type?: string
};

export type InputTextTypes = {|
  TEXT: string,
  PASSWORD: string,
  EMAIL: string
|}

export type RegexValidationTypes = {|
  EMAIL: Object
|} 

gimana cara fix bagian ini onChange: jest.fn((event: SyntheticInputEvent<HTMLInputElement>) => { console.log(event); }), unexpected console statement.

contoh penggunaan nya adalaah untuk merubah state jadi saya bingung untuk mocking nya
